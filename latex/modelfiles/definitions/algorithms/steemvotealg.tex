\begin{algorithm}[H]
  \caption{$\textsc{Vote}\left(\postlist, \mathrm{aux}\right)$}
  \label{alg:steem:vote}
  \begin{algorithmic}[1]
    \State Store aux contents as constants
    \If{$\textsc{VoteThisRound}\left(\round\right) = \mathrm{yes}$}
      \State $\mathrm{top} \gets \textsc{ChooseTopPosts}\left(\attspan,
      \postlist, \mathrm{votedPosts}\right)$
      \State $\left(i, l\right) \gets \argmax\limits_{\left(i, l\right) \in
      \mathrm{top}}{\lbrace l_{\pid} \rbrace}$
      \State $\mathrm{votedPosts} \gets \mathrm{votedPosts} \: \cup \left(i,
      l\right)$
      \State \Return $\left(\left(i, l\right), l_{\pid}\right)$
    \Else
      \State \Return \textbf{null}
    \EndIf
    \State
    \Function{ChooseTopPosts}{$\attspan, \postlist, \mathrm{votedPosts}$}
      \State $\result \gets \emptyset$
      \State $\mathrm{idx} \gets 1$
      \While{$|\result| < \attspan \And \mathrm{idx} \leq |\postlist|$}
        \If{$\postlist\left[\mathrm{idx}\right] \notin \mathrm{votedPosts}$}
        \Comment{One vote per post per player}
          \State $\result \gets \result \cup \lbrace
          \postlist\left[\mathrm{idx}\right] \rbrace$
        \EndIf
        \State $\mathrm{idx} \gets \mathrm{idx} + 1$
      \EndWhile
      \State \Return $\result$
    \EndFunction
    \State
    \Function{VoteThisRound}{$\round, |\postlist|$}
      \If{$\floor*{\left(\round - 1\right) \mod \frac{\rounds - 1}{|\postlist| -
      1}} = 0$} \Comment{TODO: if Discussion above is accepted, change
      $|\postlist|$ to $\postlen$ and don't input $|\postlist|$.}
        \State \Return yes
      \Else
        \State \Return no
      \EndIf
    \EndFunction
  \end{algorithmic}
\end{algorithm}
